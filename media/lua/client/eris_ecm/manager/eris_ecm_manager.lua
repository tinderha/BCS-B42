----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
--
-- eris_ecm_manager
--
--
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
require "ISUI/ISPanel"
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

eris_ecm_manager = ISPanel:derive("eris_ecm_manager");

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function eris_ecm_manager:update()
	self.updateTick = self.updateTick + 1;
	if self.updateTick == self.updateTickMax then
		local now = getTimestampMs();
		eris_ecm_client.ping();
		self.updateTick = 0;
	end;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function eris_ecm_manager:render()

end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function eris_ecm_manager:prerender()

end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function eris_ecm_manager:close()
	self:setVisible(false);
	self:removeFromUIManager();
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function eris_ecm_manager:initialise()
	ISPanel.initialise(self);
	self:addToUIManager();
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

function eris_ecm_manager:new()
	local o = ISPanel:new(0,0,0,0);
	setmetatable(o, self)
		self.__index = self;
		o.showBackground = true;
		o.showBorder = true;
		o.moveWithMouse = false;
		o.textColor = {r=1, g=1, b=1, a=1};
		o.backgroundColor = {r=0, g=0, b=0, a=1};
		o.borderColor = {r=1, g=1, b=1, a=0.5};
		o.font_height_medium = getTextManager():getFontHeight(UIFont.NewMedium)
		o.updateTick = 0;
		o.updateTickMax = 360;
	return o;
end

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------